<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Tr√≤ ch∆°i t√¨nh y√™u</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: black;
      font-family: Arial, sans-serif;
      text-align: center;
      overflow: hidden;
      color: #ff4da6; /* h·ªìng ƒë·ªè */
    }

    .hidden { display: none; }

    .screen {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 90%;
      max-width: 800px;
    }

    .title {
      font-size: 2.5em;
      margin-bottom: 25px;
      animation: sparkle 2s infinite;
    }

    /* Nh·∫•p nh√°y intro */
    .blink { animation: blink 1s infinite; }
    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.4; }
    }

    /* Tim ƒë·∫≠p m·∫°nh cho c√¢u h·ªèi */
    #question .title {
      animation: heartbeat 1s infinite;
    }
    @keyframes heartbeat {
      0%   { transform: scale(1); }
      20%  { transform: scale(1.2); }
      40%  { transform: scale(1); }
      60%  { transform: scale(1.15); }
      80%  { transform: scale(1); }
      100% { transform: scale(1); }
    }

    /* Hi·ªáu ·ª©ng l·∫•p l√°nh ch·ªØ */
    @keyframes sparkle {
      0%   { text-shadow: 0 0 5px #ff99cc, 0 0 10px #ff4da6; }
      50%  { text-shadow: 0 0 20px #ff66b2, 0 0 30px #ff1a75; }
      100% { text-shadow: 0 0 5px #ff99cc, 0 0 10px #ff4da6; }
    }

    .btn-group {
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
    }

    button {
      flex: 1;
      max-width: 250px;
      padding: 16px 28px;
      font-size: 1.8em;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background: hotpink;
      color: white;
      transition: transform 0.2s;
      margin-top: 20px;
      margin-left: 10px;
      margin-right: 10px;
    }

    button:hover { transform: scale(1.05); }

    #final-message {
      font-size: 2.5em;
      animation: heartbeat 1s infinite, sparkle 2s infinite;
    }

    /* N·ªÅn tim */
    canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }
  </style>
</head>
<body>
  <!-- N·ªÅn -->
  <canvas id="pinkboard"></canvas>
  <canvas id="hearts"></canvas>

  <!-- Intro -->
  <div id="intro" class="screen">
    <div class="title blink">B√≠ m·∫≠t l·ªõn ƒëang ch·ªù b√©, <br> tr·∫£ l·ªùi c√°c c√¢u h·ªèi ƒë·ªÉ kh√°m ph√°, <br> b√© s·∫µn s√†ng ch∆∞a n√†o?</div>
    <button onclick="startGame()">S·∫µn s√†ng</button>
  </div>

  <!-- Question -->
  <div id="question" class="screen hidden">
    <div class="title" id="question-text"></div>
    <div class="btn-group"></div>
  </div>

  <!-- Answer -->
  <div id="answer" class="screen hidden">
    <div class="title" id="answer-text"></div>
    <div class="btn-group" id="answer-buttons"></div>
  </div>

  <!-- Final -->
  <div id="final" class="screen hidden">
    <div id="final-message"></div>
  </div>

  <script>
    const questions = [
      {
        text: "H√¥m nay ng√†y bao nhi√™u nh·ªâ?",
        options: [
          { label: "2/10", feedback: "Ch√∫c m·ª´ng sinh nh·∫≠t em y√™u ü•≥üéÇüíñ" },
          { label: "23/07", feedback: "G√¨, ƒë√¢u ph·∫£i sn anh, qua l√¢u g√≤i üòÜ, <br> nay l√† sinh nh·∫≠t em y√™u ƒë·∫•y üéâüéÇ" }
        ]
      },
      {
        text: "Ng∆∞·ªùi ch∆°i cute d·ªÖ th∆∞∆°ng n√†y l√† ai th·∫ø?",
        options: [
          { label: "B√© y√™u", feedback: "∆†, sao b√© y√™u v·ª´a th√¥ng minh <br> l·∫°i v·ª´a xinh th·∫ø nh·ªâ, <br> h·∫ø h·∫ø üòç" },
          { label: "Anh y√™u", feedback: "Te te, sai r√πi, <br> B√© iu m·ªõi l√† xinh x·∫Øn cute h·∫°t me üíï" }
        ]
      },
      {
        text: "B√© l√† m·ªôt l·∫≠p tr√¨nh vi√™n t·∫≠n t√¢m, <br> khi g·∫∑p bug b√© s·∫Ω?",
        options: [
          { label: "S·ª≠a n√≥", feedback: "Hi, Anh l√† big bug c·ªßa em ƒë√¢y üêû <br> L√†m v·ª£ a nh√©? <br> C·∫£ ƒë·ªùi n√†y ta b√™n nhau ƒë·ªÉ ... s·ª≠a bug <br> h√≠ h√≠ üíç", final: true },
          { label: "K·ªá n√≥", feedback: "K·ªá l√†m sao ƒë∆∞·ª£c üòÜ <br> L√†m v·ª£ anh ƒë·ªÉ ... <br> s·ª≠a bug anh iu nh√©, c·ª•c c∆∞ng? <br>üíç", final: true }
        ]
      }
    ];

    let current = 0;

    function startGame() {
      document.getElementById("intro").classList.add("hidden");
      showQuestion();
    }

    function showQuestion() {
      const q = questions[current];
      document.getElementById("question").classList.remove("hidden");
      document.getElementById("answer").classList.add("hidden");
      document.getElementById("question-text").innerHTML = q.text;
      const btnGroup = document.querySelector(".btn-group");
      btnGroup.innerHTML = "";
      q.options.forEach(opt => {
        const btn = document.createElement("button");
        btn.innerText = opt.label;
        btn.onclick = () => answer(opt);
        btnGroup.appendChild(btn);
      });
    }

    function answer(option) {
      document.getElementById("question").classList.add("hidden");
      document.getElementById("answer").classList.remove("hidden");
      document.getElementById("answer-text").innerHTML = option.feedback;

      const btnGroup = document.getElementById("answer-buttons");
      btnGroup.innerHTML = "";
      if (option.final) {
        const yesBtn = document.createElement("button");
        yesBtn.innerText = "V√¢ng üíñ";
        yesBtn.onclick = () => showFinal("V·ª£ y√™u, em tuy·ªát nh·∫•t üíï");
        btnGroup.appendChild(yesBtn);

        const noBtn = document.createElement("button");
        noBtn.innerText = "·ª® ∆∞ üòò";
        noBtn.onclick = () => showFinal("V·ª£ anh th·∫≠t d·ªÖ th∆∞∆°ng üòç");
        btnGroup.appendChild(noBtn);
      } else {
        const nextBtn = document.createElement("button");
        nextBtn.innerText = "C√¢u ti·∫øp üòÅ";
        nextBtn.onclick = nextQuestion;
        btnGroup.appendChild(nextBtn);
      }
    }

    function nextQuestion() {
      current++;
      if (current < questions.length) {
        showQuestion();
      }
    }

    function showFinal(msg) {
      document.getElementById("answer").classList.add("hidden");
      document.getElementById("final").classList.remove("hidden");
      document.getElementById("final-message").innerHTML = msg;
    }

    /* Hi·ªáu ·ª©ng m∆∞a tim */
    const canvasHearts = document.getElementById("hearts");
    const ctxH = canvasHearts.getContext("2d");
    function resizeHearts() {
      canvasHearts.width = window.innerWidth;
      canvasHearts.height = window.innerHeight;
    }
    window.addEventListener("resize", resizeHearts);
    resizeHearts();

    const hearts = [];
    function drawHeart(x, y, size) {
      ctxH.save();
      ctxH.translate(x, y);
      ctxH.scale(size * 3, size * 3);
      ctxH.beginPath();
      ctxH.moveTo(0, -2);
      ctxH.bezierCurveTo(2, -4, 4, 0, 0, 4);
      ctxH.bezierCurveTo(-4, 0, -2, -4, 0, -2);
      ctxH.fillStyle = "rgba(255,105,180,0.6)";
      ctxH.fill();
      ctxH.restore();
    }
    function loopHearts() {
      ctxH.clearRect(0, 0, canvasHearts.width, canvasHearts.height);
      if (Math.random() < 0.3) {
        hearts.push({
          x: Math.random() * canvasHearts.width,
          y: canvasHearts.height + 20,
          size: Math.random() * 0.8 + 0.5,
          speed: Math.random() * 3 + 2
        });
      }
      hearts.forEach(h => h.y -= h.speed);
      hearts.forEach(h => drawHeart(h.x, h.y, h.size));
      requestAnimationFrame(loopHearts);
    }
    loopHearts();

    /* Hi·ªáu ·ª©ng tim ph·∫≠p ph·ªìng */
    var settings = {
      particles: {
        length: 800, // s·ªë h·∫°t
        duration: 2,
        velocity: 135,
        effect: -0.35,
        size: 14
      }
    };

    var Point = (function() {
      function Point(x, y) { this.x = x||0; this.y = y||0; }
      Point.prototype.clone = function() { return new Point(this.x, this.y); };
      Point.prototype.length = function(length) {
        if (length === undefined) return Math.sqrt(this.x*this.x+this.y*this.y);
        this.normalize(); this.x*=length; this.y*=length; return this;
      };
      Point.prototype.normalize = function() {
        var l = this.length(); this.x/=l; this.y/=l; return this;
      };
      return Point;
    })();

    var Particle = (function() {
      function Particle() { this.position=new Point(); this.velocity=new Point(); this.acceleration=new Point(); this.age=0; }
      Particle.prototype.initialize = function(x,y,dx,dy) {
        this.position.x=x; this.position.y=y; this.velocity.x=dx; this.velocity.y=dy;
        this.acceleration.x=dx*settings.particles.effect; this.acceleration.y=dy*settings.particles.effect; this.age=0;
      };
      Particle.prototype.update = function(dt) {
        this.position.x+=this.velocity.x*dt; this.position.y+=this.velocity.y*dt;
        this.velocity.x+=this.acceleration.x*dt; this.velocity.y+=this.acceleration.y*dt; this.age+=dt;
      };
      Particle.prototype.draw = function(ctx,img) {
        function ease(t){return (--t)*t*t+1;}
        var size=img.width*ease(this.age/settings.particles.duration);
        ctx.globalAlpha=1-this.age/settings.particles.duration;
        ctx.drawImage(img,this.position.x-size/2,this.position.y-size/2,size,size);
      };
      return Particle;
    })();

    var ParticlePool=(function(){
      var particles,firstActive=0,firstFree=0,duration=settings.particles.duration;
      function ParticlePool(length){particles=new Array(length);for(var i=0;i<particles.length;i++)particles[i]=new Particle();}
      ParticlePool.prototype.add=function(x,y,dx,dy){particles[firstFree].initialize(x,y,dx,dy);
        firstFree++;if(firstFree==particles.length)firstFree=0;if(firstActive==firstFree)firstActive++;if(firstActive==particles.length)firstActive=0;};
      ParticlePool.prototype.update=function(dt){var i;
        if(firstActive<firstFree){for(i=firstActive;i<firstFree;i++)particles[i].update(dt);}
        if(firstFree<firstActive){for(i=firstActive;i<particles.length;i++)particles[i].update(dt);for(i=0;i<firstFree;i++)particles[i].update(dt);}
        while(particles[firstActive].age>=duration&&firstActive!=firstFree){firstActive++;if(firstActive==particles.length)firstActive=0;}};
      ParticlePool.prototype.draw=function(ctx,img){
        if(firstActive<firstFree){for(var i=firstActive;i<firstFree;i++)particles[i].draw(ctx,img);}
        if(firstFree<firstActive){for(var i=firstActive;i<particles.length;i++)particles[i].draw(ctx,img);for(i=0;i<firstFree;i++)particles[i].draw(ctx,img);}
      };
      return ParticlePool;
    })();

    (function(canvas){
      var ctx=canvas.getContext('2d'),particles=new ParticlePool(settings.particles.length),
          particleRate=settings.particles.length/settings.particles.duration,time;

      function pointOnHeart(t){
        return new Point(
          160*Math.pow(Math.sin(t),3),
          130*Math.cos(t)-50*Math.cos(2*t)-20*Math.cos(3*t)-10*Math.cos(4*t)+25
        );
      }

      var image=(function(){
        var c=document.createElement('canvas'),ctx=c.getContext('2d');
        c.width=settings.particles.size; c.height=settings.particles.size;
        function to(t){var p=pointOnHeart(t);p.x=settings.particles.size/2+p.x*settings.particles.size/350;
          p.y=settings.particles.size/2-p.y*settings.particles.size/350;return p;}
        ctx.beginPath();var t=-Math.PI,p=to(t);ctx.moveTo(p.x,p.y);
        while(t<Math.PI){t+=0.01;p=to(t);ctx.lineTo(p.x,p.y);}ctx.closePath();ctx.fillStyle='#ea80b0';ctx.fill();
        var img=new Image();img.src=c.toDataURL();return img;
      })();

      function render(){
        requestAnimationFrame(render);
        var newTime=Date.now()/1000,dt=newTime-(time||newTime); time=newTime;
        ctx.clearRect(0,0,canvas.width,canvas.height);
        var amount=particleRate*dt;
        for(var i=0;i<amount;i++){var pos=pointOnHeart(Math.PI-2*Math.PI*Math.random());var dir=pos.clone().length(settings.particles.velocity);
          particles.add(canvas.width/2+pos.x,canvas.height/2-pos.y,dir.x,-dir.y);}
        particles.update(dt);particles.draw(ctx,image);
      }

      function onResize(){canvas.width=window.innerWidth;canvas.height=window.innerHeight;}
      window.onresize=onResize;setTimeout(function(){onResize();render();},10);
    })(document.getElementById('pinkboard'));
  </script>
</body>
</html>



